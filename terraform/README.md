## Обзор курса (простыми словами)
Этот курс для тех, кто ни разу не трогал Terraform, но уже слышал, что через него можно разворачивать виртуалки, базы данных и всё, что связано с облаком — как по волшебству, только с кодом. Мы будем идти шаг за шагом: от установки до развёртывания работающего примера, например, сервера и базы данных в облаке.

---

### Модуль 1. Что это вообще такое — Terraform?
**Просто:** Terraform — это программа, которая по файлам (в которых вы описали, что вам нужно) делает вам инфраструктуру. То есть вы пишете в текстовом файле: "хочу сервер, хочу базу", и Terraform их создаёт.

**Что нужно сделать:**
- Установить Terraform (там один файл, просто кладём в папку и добавляем в `PATH`)
- Ввести команду `terraform version`, чтобы убедиться, что всё работает

**Практика:**
- Открой терминал, создай папку, напиши туда пустой `main.tf`, выполни `terraform init` — он скажет, что готов к работе

---

### Модуль 2. Начинаем писать конфигурации
**Просто:** Пишем текстовые файлы `.tf`, в которых описываем, что мы хотим: например, сервер, бакет, базу и т.п. Пишем на языке HCL — очень похож на JSON, только попроще.

**Пример:**
```hcl
provider "aws" {
  region = "us-east-1"
}

resource "aws_instance" "example" {
  ami           = "ami-12345678"
  instance_type = "t2.micro"
}
```

**Что делаем:**
- Описываем провайдера (например, AWS)
- Создаём простой ресурс (виртуальную машину)

**Практика:**
- Попробуй создать простой файл, который создаёт пустой файл у тебя на компе через ресурс `local_file`

---

### Модуль 3. Провайдер и реальные ресурсы
**Просто:** Провайдер — это "проводник" к облаку. Например, AWS, Яндекс.Облако, GCP. Ты говоришь Terraform'у — "я хочу работать с AWS", и он подгружает нужные штуки.

**Настройка:**
- Для AWS нужен `access_key` и `secret_key`. Указываем их либо прямо в коде (нежелательно), либо в переменных среды

**Пример простого кейса:**
- Создать виртуалку EC2 + бакет S3 (файловое хранилище)

**Практика:**
- Подключиться к своему AWS-аккаунту, создать EC2-инстанс и бакет S3. Убедиться, что они видны в консоли

---

### Модуль 4. Переменные и выводы (упрощаем жизнь)
**Просто:** Чтобы не копипастить одно и то же — заводим переменные. Чтобы потом узнать, что мы там создали — делаем выводы.

**Пример:**
```hcl
variable "instance_name" {
  default = "test-server"
}

output "public_ip" {
  value = aws_instance.example.public_ip
}
```

**Практика:**
- Задать имя ресурсу через переменную
- Вывести IP-адрес созданного сервера

---

### Модуль 5. Модули — как функции в коде
**Просто:** Модуль — это кусок конфигурации, который можно переиспользовать. Например, модуль "база данных", "сервер", "мониторинг" и т.п.

**Что делаем:**
- Создаём папку `modules/my_db/`, туда кладём обычные `.tf` файлы
- Подключаем модуль через `module "db" { source = "./modules/my_db" }`

**Практика:**
- Вынести развёртывание базы (например, PostgreSQL) в отдельный модуль и подключить его

---

### Модуль 6. Состояние — как Terraform помнит, что ты сделал
**Просто:** Terraform сохраняет, что он уже создал, в файл `terraform.tfstate`. Это как его память. Если этот файл потеряется — Terraform забудет, что он что-то создавал.

**Удалённое хранение:**
- Обычно кладут в облако (например, S3 в AWS), и включают блокировки (через DynamoDB)

**Практика:**
- Настроить хранение состояния в бакете S3
- Запустить `terraform apply` из двух разных терминалов — и убедиться, что блокировки работают

---

### Модуль 7. Умные штуки: циклы, условия
**Просто:** Иногда нужно создавать несколько одинаковых ресурсов — можно использовать `for_each` или `count`. Также можно использовать условия `if` в конфигурациях.

**Пример:**
- Сделать 3 одинаковые ВМ по списку

**Практика:**
- Создать список имён и по ним создать несколько ресурсов

---

### Модуль 8. Автоматизация через Git
**Просто:** Если ты работаешь в команде — лучше всё держать в Git. Там можно делать ревью, а также запускать Terraform автоматически.

**Пример пайплайна:**
```yaml
- name: Terraform Plan
  run: terraform plan
```

**Практика:**
- Сделать так, чтобы при каждом коммите или Pull Request запускался `terraform plan`

---

## Итоговое задание (реальный кейс)
- Поднять в облаке:
  - 1 виртуальную машину с nginx
  - PostgreSQL базу в отдельной подсети
  - Балансировщик между двумя ВМ
  - DNS-запись, чтобы всё открывалось по имени

## Полезные ссылки
- https://www.terraform.io/docs
- https://registry.terraform.io
- https://learn.hashicorp.com/terraform

---

*Terraform — это просто. Главное — не бояться писать и запускать.*

