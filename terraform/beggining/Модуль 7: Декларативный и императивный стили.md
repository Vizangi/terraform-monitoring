# Декларативный и императивный стили

Если **Terraform — декларативный**, то **Ansible — императивно-декларативный** (смешанный), с сильным уклоном в **императивный стиль**.


### В чём разница:

| Характеристика       | **Terraform (декларативный)**                                    | **Ansible (императивный/декларативный)**          |
| -------------------- | ---------------------------------------------------------------- | ------------------------------------------------- |
| **Что описываем**    | *Какое состояние мы хотим получить*                              | *Что нужно сделать, чтобы прийти к цели*          |
| **Как работает**     | Планирует изменения → приводит инфраструктуру в нужное состояние | Выполняет шаги один за другим, как в сценарии     |
| **Пример мышления**  | "Хочу 3 VM с такими параметрами"                                 | "Создай 3 VM вот так: сначала это, потом то..."   |
| **Идемпотентность**  | Встроена (сравнивает текущее и желаемое состояние)               | Зависит от конкретных модулей и задач             |
| **Сфера применения** | Управление инфраструктурой (VM, сети, облака)                    | Настройка конфигурации, установка ПО, оркестрация |

---

###  Аналогия:

* **Terraform** — это архитектор: "Я хочу вот такой дом", и он организует строительство.
* **Ansible** — это прораб: "Сначала закладываем фундамент, потом стены, потом крышу".

---

###  Примеры:

**Terraform (декларативно):**

```hcl
resource "aws_instance" "web" {
  count         = 3
  ami           = "ami-xyz"
  instance_type = "t2.micro"
}
```

**Ansible (императивно-декларативно):**

```yaml
- name: Установка nginx
  hosts: web
  tasks:
    - name: Установить nginx
      apt:
        name: nginx
        state: present
```

---

###  Вывод:

* **Terraform** — декларативен: ты описываешь состояние инфраструктуры.
* **Ansible** — гибрид: ты управляешь процессом пошагово, но можешь использовать декларативные модули (`apt`, `copy`, `template` и др.).

---
